<!DOCTYPE html>
<html>

  <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Mysql在Linux环境下yum方式安装和配置 - 海波的博客</title>

	<link rel="shortcut icon" href="/styles/images/favicon.png">
	<link rel="icon" href="/styles/images/favicon.png">

	<link rel="stylesheet" href="/styles/css/index.css">
	<link rel="stylesheet" href="/styles/css/fontawesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="/styles/css/syntax.css">
	<link rel="canonical" href="/2016/10/21/mysql-yum-install/">
	<link rel="alternate" type="application/rss+xml" title="海波的博客" href="/feed.xml">

	<meta name="keywords" content="Mysql在Linux环境下yum方式安装和配置, 海波的博客, 葛海波;个人博客;">
	<meta name="description" content="葛海波;个人博客;">

	<script src="/styles/js/jquery.min.js"></script>
	<!--[if lt IE 9]>
    	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  	<![endif]-->
  	<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "//hm.baidu.com/hm.js?";
		  var s = document.getElementsByTagName("script")[0];
		  s.parentNode.insertBefore(hm, s);
		})();
	</script>
  	<style type="text/css">
	  	.docs-content{
	  		margin-bottom: 10px;
	  	}
  	</style>
</head>


  <body class="index">

    <header class="navbar navbar-inverse navbar-fixed-top docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <!-- <a href="/" class="navbar-brand">
        <img src="/styles/images/logo.jpg">
      </a> -->
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">
        <li>
          <a href="/">Home</a>
        </li>
        <li>
          <a href="/categories/">大类分解</a>
        </li>
        <li>
          <a href="/tag">小类内聚</a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <!-- <li>
            <a><span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span></a>
        </li> -->
        <li>
          <a href="/donate/"><strong>打赏</strong></a>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">关于<b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a rel="nofollow" target="_blank" href="https://github.com/gehaibo">Github</a></li>
            <li><a rel="nofollow" target="_blank" href="">关于作者</a></li>
            <li><a rel="nofollow" href="/books">我的书单</a></li>
            <li><a rel="nofollow" href="/reference">推荐博客</a></li>
            <!-- <li><a href="/feed.xml">RSS订阅</a></li> -->
            <!-- <li class="divider"></li> -->
            <!-- <li><a rel="nofollow" target="_blank" href="https://github.com/gehaibo/gehaibo.github.com">本项目</a></li> -->
          </ul>
        </li>
      </ul>
    </nav>
  </div>
</header>

    <div class="docs-header" id="content">
  <div class="container">
  	
  		<!--
		    <h1>Mysql在Linux环境下yum方式安装和配置</h1>
		    <p>Post on Oct 21, 2016 by <a href="/about">ghb</a></p>
		-->
		    <h1>Make it right before you make it faster.</h1>
    
  </div>
</div>
    
      
<div class="banner">
  <div class="container">
  	
    	<a href="/categories/#技术文档-ref">技术文档</a>	/
    	<a href="/tag/#Mysql-ref">Mysql</a>
    
  </div>
</div>

    

    <div class="container docs-container">
  <div class="row">
    <div class="col-md-3">
      <div class="sidebar hidden-print" role="complementary">
        <div id="navigation">
  <h1>目录</h1>
  <ul class="nav sidenav">
<!--
    
      
      
      
      

      
        <li><a href="#year_2017">2017</a>
          <ul class="nav">
            <li><a href="#month_2017_April">April</a></li>
      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_March">March</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_February">February</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_January">January</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
        
            </ul>
          </li>
          <li><a href="#year_2016">2016</a>
            <ul class="nav">
              <li><a href="#month_2016_December">December</a></li>
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2016_November">November</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2016_October">October</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2016_September">September</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2016_June">June</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2016_May">May</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2016_March">March</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
        
            </ul>
          </li>
          <li><a href="#year_2015">2015</a>
            <ul class="nav">
              <li><a href="#month_2015_March">March</a></li>
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2015_February">February</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2015_January">January</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
            </ul>
          </li>
      
    
-->
  </ul>
</div> 
      </div>
    </div>
    <div class="col-md-9" role="main">
      <div class="panel docs-content">
        <div class="wrapper">
            <header class="post-header">
              <h1 class="post-title">Mysql在Linux环境下yum方式安装和配置</h1>
              <!--
                <p class="post-meta">Oct 21, 2016</p>
              -->
              <div class="meta">Posted on <span class="postdate">Oct 21, 2016</span> By <a target="_blank" href="http://localhost:4000">ghb</a></div>
              <br />
            </header>
            <article class="post-content">
              <ul id="markdown-toc">
  <li><a href="#mysql安装" id="markdown-toc-mysql安装">Mysql安装</a></li>
  <li><a href="#参考资料" id="markdown-toc-参考资料">参考资料：</a></li>
</ul>

<h2 id="mysql安装">Mysql安装</h2>

<ul>
  <li>Linux环境信息</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@localhost ~]# cat /proc/version
Linux version 2.6.32-431.el6.x86_64 <span class="o">(</span>mockbuild@c6b8.bsys.dev.centos.org<span class="o">)</span> <span class="o">(</span>gcc version 4.4.7 20120313 <span class="o">(</span>Red Hat 4.4.7-4<span class="o">)</span> <span class="o">(</span>GCC<span class="o">)</span> <span class="o">)</span> <span class="c">#1 SMP Fri Nov 22 03:15:09 UTC 2013</span>
<span class="o">[</span>root@localhost ~]# uname -a
Linux localhost.localdomain 2.6.32-431.el6.x86_64 <span class="c">#1 SMP Fri Nov 22 03:15:09 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux</span>
<span class="o">[</span>root@localhost ~]# uname -r
2.6.32-431.el6.x86_64
<span class="o">[</span>root@localhost ~]# lsb_release -a
LSB Version:	:base-4.0-amd64:base-4.0-noarch:core-4.0-amd64:core-4.0-noarch:graphics-4.0-amd64:graphics-4.0-noarch:printing-4.0-amd64:printing-4.0-noarch
Distributor ID:	CentOS
Description:	CentOS release 6.5 <span class="o">(</span>Final<span class="o">)</span>
Release:	6.5
Codename:	Final</code></pre></figure>

<ul>
  <li>下载mysql的Yum源下载</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@localhost ~]# wget http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm
<span class="o">[</span>root@localhost ~]# sudo rpm -ivh mysql-community-release-el7-5.noarch.rpm</code></pre></figure>

<ul>
  <li>如果存在则删除</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@localhost ~]# yum list installed | grep mysql
<span class="o">[</span>root@localhost ~]# yum -y remove mysql-libs.x86_64
<span class="o">[</span>root@localhost ~]# yum list | grep mysql 或 yum -y list mysql<span class="k">*</span></code></pre></figure>

<ul>
  <li>安装</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@localhost ~]# yum -y install mysql-server mysql mysql-devel</code></pre></figure>

<ul>
  <li>查看安装的Mysql版本</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@localhost ~]# rpm -qi mysql-server</code></pre></figure>

<ul>
  <li>设置用户和权限</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@localhost ~]# chgrp -R mysql /var/lib/mysql
<span class="o">[</span>root@localhost ~]# chmod -R 770 /var/lib/mysql
<span class="o">[</span>root@localhost ~]# service mysqld start</code></pre></figure>

<ul>
  <li>Mysql设置本地用户和远程用户登录</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@localhost ~]# mysql
<span class="gp">$ </span>mysql &gt; use mysql;
<span class="gp">$ </span>mysql &gt; grant all on <span class="k">*</span>.<span class="k">*</span> to <span class="s1">'root'</span>@<span class="s1">'localhost'</span> identified by <span class="s1">'root'</span>;
<span class="gp">$ </span>mysql &gt; grant all on <span class="k">*</span>.<span class="k">*</span> to <span class="s1">'root'</span>@<span class="s1">'%'</span> identified by <span class="s1">'root'</span>;
<span class="gp">$ </span>mysql &gt; flush privileges;</code></pre></figure>

<ul>
  <li>修改Mysql在linux下大小写不敏感</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@localhost ~]#vi /etc/my.cnf
<span class="c"># 在[mysqld]后添加如下行，0代表大小写敏感，1代表不敏感</span>
<span class="nv">lower_case_table_names</span><span class="o">=</span> 0
<span class="o">[</span>root@localhost ~]# service mysqld restart</code></pre></figure>

<ul>
  <li>开放3306端口,修改文件</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@localhost ~]#sudo vim /etc/sysconfig/iptables</code></pre></figure>

<ul>
  <li>在文件中添加如下行</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">*</span>filter
:INPUT ACCEPT <span class="o">[</span>0:0]
:FORWARD ACCEPT <span class="o">[</span>0:0]
:OUTPUT ACCEPT <span class="o">[</span>0:0]
-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
-A INPUT -p icmp -j ACCEPT
-A INPUT -i lo -j ACCEPT
-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT
-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT
-A INPUT -m state --state NEW -m tcp -p tcp --dport 3306 -j ACCEPT
-A INPUT -j REJECT --reject-with icmp-host-prohibited
-A FORWARD -j REJECT --reject-with icmp-host-prohibited
COMMIT</code></pre></figure>

<ul>
  <li>重启防火墙</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@localhost ~]# sudo service iptables restart</code></pre></figure>

<ul>
  <li>在Linode上会报错</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@li254-129 ~]# service iptables restart
iptables: Setting chains to policy ACCEPT: security raw nat[FAILED]filter
iptables: Flushing firewall rules:                         <span class="o">[</span>  OK  <span class="o">]</span>
iptables: Unloading modules:                               <span class="o">[</span>  OK  <span class="o">]</span>
iptables: Applying firewall rules:                         <span class="o">[</span>  OK  <span class="o">]</span></code></pre></figure>

<ul>
  <li>
    <p>原因是：Linode官方在iptables里加了一个security的规则链，但是centos不支持。</p>
  </li>
  <li>
    <p>解决办法</p>
  </li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#找到如下case段,在raw后面加上security)段，修改后如下。</span>
<span class="o">[</span>root@li254-129 ~]# vim /etc/init.d/iptables
<span class="k">for </span>i <span class="k">in</span> <span class="nv">$tables</span>; <span class="k">do
 </span><span class="nb">echo</span> -n <span class="s2">"</span><span class="nv">$i</span><span class="s2"> "</span>
 <span class="k">case</span> <span class="s2">"</span><span class="nv">$i</span><span class="s2">"</span> <span class="k">in
 </span>raw<span class="p">)</span>
 <span class="nv">$IPTABLES</span> -t raw -P PREROUTING <span class="nv">$policy</span> <span class="se">\</span>
 <span class="o">&amp;&amp;</span> <span class="nv">$IPTABLES</span> -t raw -P OUTPUT <span class="nv">$policy</span> <span class="se">\</span>
 <span class="o">||</span> <span class="nb">let </span>ret+<span class="o">=</span>1
 <span class="p">;;</span>
security<span class="p">)</span>
 <span class="nv">$IPTABLES</span> -t filter -P INPUT <span class="nv">$policy</span> <span class="se">\</span>
 <span class="o">&amp;&amp;</span> <span class="nv">$IPTABLES</span> -t filter -P OUTPUT <span class="nv">$policy</span> <span class="se">\</span>
 <span class="o">&amp;&amp;</span> <span class="nv">$IPTABLES</span> -t filter -P FORWARD <span class="nv">$policy</span> <span class="se">\</span>
 <span class="o">||</span> <span class="nb">let </span>ret+<span class="o">=</span>1
 <span class="p">;;</span></code></pre></figure>

<ul>
  <li>下载安装java</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># 下载安装JDK</span>
wget http://download.oracle.com/otn-pub/java/jdk/8u77-b03/jdk-8u77-linux-x64.rpm?AuthParam<span class="o">=</span>1458919543_9b2e065bf9d967bdd1b416b3f5935302
rpm -ivh jdk-8u77-linux-x64.rpm
<span class="c"># 下载安装TOMCAT</span>
wget  wget http://mirrors.cnnic.cn/apache/tomcat/tomcat-8/v8.0.32/bin/apache-tomcat-8.0.32.tar.gz</code></pre></figure>

<ul>
  <li>配置java路径</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>root@localhost ~]# vi /etc/profile
<span class="nb">export </span><span class="nv">JAVA_HOME</span><span class="o">=</span>/usr/java/jdk1.6.0_27
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$JAVA_HOME</span>/bin
<span class="o">[</span>root@localhost ~]# <span class="nb">source</span> /etc/profile</code></pre></figure>

<p><br />
<br /></p>

<h2 id="参考资料">参考资料：</h2>
<p>yum安装MySQL并设置密码：<a href="http://www.cnblogs.com/xiaochaohuashengmi/archive/2011/10/16/2214272.html">http://www.cnblogs.com/xiaochaohuashengmi/archive/2011/10/16/2214272.html</a></p>

<p>centos7下使用yum安装mysql并创建用户，数据库以及设置远程访问：<a href="http://my.oschina.net/fhd/blog/383847">http://my.oschina.net/fhd/blog/383847</a></p>

<p><br />
<br /></p>

            </article>
        </div>
      </div>
      <div class="panel docs-content">
        <article class="post-content">
          <div class="wrapper">
             
          </div>
        </article>
      </div>
    </div>
  </div>
</div>

    
    <footer class="footer" role="contentinfo">
	<div class="container">
		<p class="copyright">Copyright &copy; 2014-2017 <a href=""><code>ghb</code></a>.</p>
		<p>Powered by <a href="http://jekyllrb.com">Jekyll</a>, themed from <a href="http://lesscss.cn/">Less</a></p>
	</div>
</footer>

<script src="/styles/js/jquery.min.js"></script>
<script src="/styles/js/bootstrap.min.js"></script>
<script src="/styles/js/holder.min.js"></script>
<script src="/styles/js/lessismore.js"></script>
<script src="/styles/js/application.js"></script>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  </body>
</html>
