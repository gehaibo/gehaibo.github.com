<!DOCTYPE html>
<html>

  <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Java包装类解读 - 海波的博客</title>

	<link rel="shortcut icon" href="/styles/images/favicon.png">
	<link rel="icon" href="/styles/images/favicon.png">

	<link rel="stylesheet" href="/styles/css/index.css">
	<link rel="stylesheet" href="/styles/css/fontawesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="/styles/css/syntax.css">
	<link rel="canonical" href="/2016/11/17/Java-Packaging-class/">
	<link rel="alternate" type="application/rss+xml" title="海波的博客" href="/feed.xml">

	<meta name="keywords" content="Java包装类解读, 海波的博客, 葛海波;个人博客;">
	<meta name="description" content="葛海波;个人博客;">

	<script src="/styles/js/jquery.min.js"></script>
	<!--[if lt IE 9]>
    	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  	<![endif]-->
  	<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "//hm.baidu.com/hm.js?94be4b0f9fc5d94cc0d0415ea6761ae9";
		  var s = document.getElementsByTagName("script")[0];
		  s.parentNode.insertBefore(hm, s);
		})();
	</script>
  	<style type="text/css">
	  	.docs-content{
	  		margin-bottom: 10px;
	  	}
  	</style>
</head>


  <body class="index">

    <header class="navbar navbar-inverse navbar-fixed-top docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <!-- <a href="/" class="navbar-brand">
        <img src="/styles/images/logo.jpg">
      </a> -->
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">
        <li>
          <a href="/">Home</a>
        </li>
        <li>
          <a href="/categories/">大类分解</a>
        </li>
        <li>
          <a href="/tag">小类内聚</a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <!-- <li>
            <a><span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span></a>
        </li> -->
        <li>
          <a href="/donate/"><strong>打赏</strong></a>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">关于<b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a rel="nofollow" target="_blank" href="https://github.com/gehaibo">Github</a></li>
            <li><a rel="nofollow" target="_blank" href="">关于作者</a></li>
            <li><a rel="nofollow" href="/books">我的书单</a></li>
            <li><a rel="nofollow" href="/reference">推荐博客</a></li>
            <!-- <li><a href="/feed.xml">RSS订阅</a></li> -->
            <!-- <li class="divider"></li> -->
            <!-- <li><a rel="nofollow" target="_blank" href="https://github.com/gehaibo/gehaibo.github.com">本项目</a></li> -->
          </ul>
        </li>
      </ul>
    </nav>
  </div>
</header>

    <div class="docs-header" id="content">
  <div class="container">
  	
  		<!--
		    <h1>Java包装类解读</h1>
		    <p>Post on Nov 17, 2016 by <a href="/about">ghb</a></p>
		-->
		    <h1>Make it right before you make it faster.</h1>
    
  </div>
</div>
    
      
<div class="banner">
  <div class="container">
  	
    	<a href="/categories/#Java基础-ref">Java基础</a>	/
    	<a href="/tag/#Java语法糖-ref">Java语法糖</a>
    
  </div>
</div>

    

    <div class="container docs-container">
  <div class="row">
    <div class="col-md-3">
      <div class="sidebar hidden-print" role="complementary">
        <div id="navigation">
  <h1>目录</h1>
  <ul class="nav sidenav">
<!--
    
      
      
      
      

      
        <li><a href="#year_2017">2017</a>
          <ul class="nav">
            <li><a href="#month_2017_April">April</a></li>
      

      
            
          
              <li><a href="#month_2017_February">February</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
              <li><a href="#month_2017_January">January</a></li>
          
        
      
    
      
      
      
      

      

      
            
          
        
      
    
      
      
      
      

      

      
        
            </ul>
          </li>
          <li><a href="#year_2016">2016</a>
            <ul class="nav">
              <li><a href="#month_2016_November">November</a></li>
        
      
    
      
      
      
      

      

      
        
            </ul>
          </li>
          <li><a href="#year_2014">2014</a>
            <ul class="nav">
              <li><a href="#month_2014_November">November</a></li>
        
      
    
      
      
      
      

      

      
            </ul>
          </li>
      
    
-->
  </ul>
</div> 
      </div>
    </div>
    <div class="col-md-9" role="main">
      <div class="panel docs-content">
        <div class="wrapper">
            <header class="post-header">
              <h1 class="post-title">Java包装类解读</h1>
              <!--
                <p class="post-meta">Nov 17, 2016</p>
              -->
              <div class="meta">Posted on <span class="postdate">Nov 17, 2016</span> By <a target="_blank" href="http://localhost:4000">ghb</a></div>
              <br />
            </header>
            <article class="post-content">
              <ul id="markdown-toc">
  <li><a href="#1基本类型和包装类对应关系" id="markdown-toc-1基本类型和包装类对应关系">1.基本类型和包装类对应关系</a></li>
  <li><a href="#2基本类型和包装类转换" id="markdown-toc-2基本类型和包装类转换">2.基本类型和包装类转换</a></li>
  <li><a href="#3包装类和字符串直接转换" id="markdown-toc-3包装类和字符串直接转换">3.包装类和字符串直接转换</a></li>
  <li><a href="#4包装类基本变量相互比较" id="markdown-toc-4包装类基本变量相互比较">4.包装类，基本变量相互比较</a></li>
</ul>

<h1 id="1基本类型和包装类对应关系">1.基本类型和包装类对应关系</h1>

<p>除了int和char例外，其他均首字母大写
基本数据类型 | 包装类
—|—
byte|Byte
short|Short
int|Integer
long|Long
char|Charater
float|Float
double|Double
boolean|Bloolean</p>

<h1 id="2基本类型和包装类转换">2.基本类型和包装类转换</h1>

<p><strong>自动装箱和拆箱</strong></p>
<ul>
  <li>
    <p><strong>自动装箱：</strong> 基本类型–&gt;包装类</p>

    <pre><code class="language-Java">  {
      //1.直接把基本变量赋值给Integer对象
      Integer intObj = 5;
      //2.直接把基本变量赋值给Object对象
      Object boolObject = true;
  }

</code></pre>
    <ul>
      <li>
        <p><strong>自动拆箱：</strong> 基本类型&lt;–包装类
```Java
{
    //1.直接把Integer赋值给int
    int it = intObj;</p>

        <pre><code>//2.先把Object强制转换成Boolean，再赋值给boolean
if (boolObject instanceof Boolean){
    boolean b = (Boolean)boolObject;
} }
</code></pre>
      </li>
    </ul>

    <p>```</p>

    <p><strong>注意:</strong> 自动拆箱和装箱只能在对应类型之间，例如int和Integer。</p>
  </li>
</ul>

<h1 id="3包装类和字符串直接转换">3.包装类和字符串直接转换</h1>

<p>字符串转化成基本类型</p>

<pre><code class="language-Java">    {
        String intStr = "111";

        //1.利用包装类提供的Xxx(String x)构造器
        int int1 = new Integer(intStr);

        //2.利用包装类提供的parseXxx(String x)静态方法
        int int2 = Integer.parseInt(intStr);
    }
</code></pre>
<p><strong>注意:</strong> Character包装类无此parseXxx(String x)静态方法</p>

<p>基本类型转化成字符串</p>
<pre><code class="language-Java">    {
        int it1 = 111;

        //1.通过String.valueOf(xxx)转换
        String str1 = String.valueOf(int1);

        //2.将基本变量和""进行连接运算
        String str2 = it1 + "";
    }
</code></pre>

<h1 id="4包装类基本变量相互比较">4.包装类，基本变量相互比较</h1>

<p>包装类和基本变量比较，可以直接进行数值比较</p>
<pre><code class="language-Java">    {
        Integer a = new Integer(100);
        //输出true
        System.out.println("100的包装类实力是否大于50:"+(a &gt; 50));
    }
</code></pre>
<p>包装类直接相互比较</p>

<ul>
  <li>包装类实例实际是引用类型，只有两个包装类引用同一个对象时才会返回true
    <pre><code class="language-Java">{
    //输出false
    System.out.println("比较100的包装类是否相等:"+
    (new Integer(100) == new Integer(100)));
}
</code></pre>
    <p><strong>特殊情况(部分面试会问）：应用常量池的场景</strong> 自动装箱可以把一些基本类型赋值给一个包装类实例，但会有以下特殊情况~</p>
    <pre><code class="language-Java">public static void main(String[] args)
{
    //Java在编译的时候会直接将代码封装成Intege从而使用常量池中的对象
    Integer ina = 2;
    Integer inb = 2;
    System.out.println("两个2自动装箱后是否相等"+ (ina == inb)); // 输出true

    //超出缓存数组范围，无法使用常量池
    Integer biga = 128;
    Integer bigb = 128;
    System.out.println("两个2自动装箱后是否相等"+ (biga == bigb)); // 输出false
}
</code></pre>
    <p><strong>直接看源码分析：</strong>
系统会把一个-128~127之间的数值自动装箱成Integer实例，并放入cache数组缓存起来，如果以后还有这个范围的整数自动装箱，实际上是指向同一个数组元素，但不在这个范围内的，系统会重新创建一个Integer实例。</p>
  </li>
</ul>

<pre><code class="language-Java">    private static class IntegerCache {
        static final int low = -128;
        static final int high;
        static final Integer cache[];

        static {
            // high value may be configured by property
            int h = 127;
            String integerCacheHighPropValue =
                sun.misc.VM.getSavedProperty("java.lang.Integer.IntegerCache.high");
            if (integerCacheHighPropValue != null) {
                try {
                    int i = parseInt(integerCacheHighPropValue);
                    i = Math.max(i, 127);
                    // Maximum array size is Integer.MAX_VALUE
                    h = Math.min(i, Integer.MAX_VALUE - (-low) -1);
                } catch( NumberFormatException nfe) {
                    // If the property cannot be parsed into an int, ignore it.
                }
            }
            high = h;

            cache = new Integer[(high - low) + 1];
            int j = low;
            for(int k = 0; k &lt; cache.length; k++)
                cache[k] = new Integer(j++);

            // range [-128, 127] must be interned (JLS7 5.1.7)
            assert IntegerCache.high &gt;= 127;
        }

        private IntegerCache() {}
    }

    public static Integer valueOf(int i) {
        if (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)
            return IntegerCache.cache[i + (-IntegerCache.low)];
        return new Integer(i);
    }
</code></pre>

<p><strong>同上，也使用cache的如下面列表所示：</strong></p>

<table>
  <thead>
    <tr>
      <th>包装类</th>
      <th>缓存数组范围</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Byte</td>
      <td>static final Byte cache[] = new Byte[-(-128) + 127 + 1];</td>
    </tr>
    <tr>
      <td>Short</td>
      <td>static final Short cache[] = new Short[-(-128) + 127 + 1]</td>
    </tr>
    <tr>
      <td>Long</td>
      <td>static final Long cache[] = new Long[-(-128) + 127 + 1];</td>
    </tr>
    <tr>
      <td>Character</td>
      <td>static final Character cache[] = new Character[127 + 1];</td>
    </tr>
    <tr>
      <td>Float</td>
      <td>无</td>
    </tr>
    <tr>
      <td>Double</td>
      <td>无</td>
    </tr>
    <tr>
      <td>Boolean</td>
      <td>无</td>
    </tr>
  </tbody>
</table>

<p>创建新的对象</p>
<pre><code class="language-Java">   {
        i1 = 40;
        //创建新的对象
        Integer i2 = new Integer(40);
        System.out.println(i1==i2);//输出false
   }
</code></pre>
<p><strong>综合举例</strong></p>
<pre><code class="language-Java">   {
       public static void main(String[] args) {
        int i0 = 127;
        Integer i1 = 127;
        Integer i2 = 127;
        Integer i3 = 0;
        Integer i4 = new Integer(127);
        Integer i5 = new Integer(127);
        Integer i6 = new Integer(0);

        System.out.println("i0=i1   "  +(i0==i1));//true
        System.out.println("i0=i4   "  +(i0==i4));//true

        System.out.println("i1=i2   " + (i1 == i2));//true
        System.out.println("i1=i2+i3   " + (i1 == i2 + i3));//true
        System.out.println("i1=i4   " + (i1 == i4));//false

        System.out.println("i4=i5   " + (i4 == i5));//false
        System.out.println("i4=i5+i6   " + (i4 == i5 + i6));//true
        System.out.println("127=i5+i6   " + (127 == i5 + i6));//true
        System.out.println("---------------------------");

        int i20 = 128;
        Integer i21 = 128;
        Integer i22 = 128;
        Integer i23 = 0;
        Integer i24 = new Integer(128);
        Integer i25 = new Integer(128);
        Integer i26 = new Integer(0);

        System.out.println("i20=i21   "  +(i20==i21));//true
        System.out.println("i20=i24   "  +(i20==i24));//true

        System.out.println("i21=i22   " + (i21 == i22));//!!!!!!false
        System.out.println("i21=i22+i23   " + (i21 == i22 + i23));//true
        System.out.println("i21=i24   " + (i21 == i24));//false

        System.out.println("i24=i25   " + (i24 == i25));//false
        System.out.println("i24=i25+i26   " + (i24 == i25 + i26));//true
        System.out.println("128=i25+i26   " + (128 == i25 + i26));//true
    }
   }
</code></pre>
<p><strong>解释：</strong></p>
<ol>
  <li>int和其他Integer进行==比较是会自动拆箱为int类型。</li>
  <li>语句i4 == i5 +i6，因为+这个操作符不适用于Integer对象，是进行数值运算，要首先分别对i5和i6进行自动拆箱操作，进行数值相加，即i4 == 127。然后Integer对象无法与数值进行直接比较，所以i4自动拆箱转为int值127，最终这条语句转为127 == 127进行数值比较。</li>
</ol>

            </article>
        </div>
      </div>
      <div class="panel docs-content">
        <article class="post-content">
          <div class="wrapper">
             
          </div>
        </article>
      </div>
    </div>
  </div>
</div>

    
    <footer class="footer" role="contentinfo">
	<div class="container">
		<p class="copyright">Copyright &copy; 2014-2017 <a href=""><code>ghb</code></a>.</p>
		<p>Powered by <a href="http://jekyllrb.com">Jekyll</a>, themed from <a href="http://lesscss.cn/">Less</a></p>
	</div>
</footer>

<script src="/styles/js/jquery.min.js"></script>
<script src="/styles/js/bootstrap.min.js"></script>
<script src="/styles/js/holder.min.js"></script>
<script src="/styles/js/lessismore.js"></script>
<script src="/styles/js/application.js"></script>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  </body>
</html>
